{"version":3,"sources":["view/Home/Home.module.scss","components/BarChart/BarChat.module.scss","view/BarChartPage/BarChartPage.module.scss","components/LineChart/LineChart.module.scss","view/LineChartPage/LineChartPage.module.scss","components/PieChart/PieChart.module.scss","view/PieChartPage/PieChartPage.module.scss","components/Map/Map.module.scss","view/ChinaMapPage/ChinaMapPage.module.scss","components/SVGTree/SVGTree.module.scss","view/Home/Home.jsx","utils/utils.js","Chart/Chart.js","components/BarChart/BarChart.jsx","view/BarChartPage/BarChartPage.jsx","components/LineChart/LineChart.jsx","view/LineChartPage/LineChartPage.jsx","components/PieChart/PieChart.jsx","view/PieChartPage/PieChartPage.jsx","components/Map/Map.jsx","view/ChinaMapPage/ChinaMapPage.jsx","components/SVGTree/SVGTree.jsx","view/SVGTreePage/SVGTreePage.jsx","App.js","serviceWorker.js","index.js","App.module.scss"],"names":["module","exports","Home","className","css","home","content","uuid","s4","Math","floor","random","toString","substring","Chart","this","_width","_height","_margins","top","left","right","bottom","_data","_scaleX","_scaleY","_colors","d3","_box","_svg","_body","w","arguments","length","h","m","d","x","y","s","b","width","height","clipPath","select","remove","append","attr","getBodyWidth","padding","getBodyHeight","bodyX","bodyY","renderBox","renderSVG","defineBodyClip","renderBody","render","BarChart","config","chartId","useRef","chartRef","useEffect","box","current","chart","margins","data","_","get","scaleX","domain","map","date","range","barPadding","scaleY","money","renderBars","bars","body","selectAll","enter","merge","bandwidth","barColor","transition","duration","animateDuration","exit","renderX","svg","insert","call","renderY","renderText","textColor","text","renderGrid","each","tickShowGrid","indexOf","gridColor","renderAxis","addMouseOn","on","e","position","node","target","hoverColor","classed","renderChart","id","c","barchart","BarChartPage","useState","setData","a","async","process","readData","console","log","readCSV","useMemo","title","barChartPage","LineChart","parseDate","value","nice","line","defined","Number","isNaN","xAxis","g","ticks","tickSizeOuter","yAxis","clone","renderLine","datum","filter","lineColor","linechart","LineChartPage","dayjs","format","val","month","undefined","lineChartPage","PieChart","chartContainer","offsetHeight","offsetWidth","color","name","t","reverse","arc","innerRadius","min","outerRadius","arcLabelRadius","arcLabel","pie","sort","renderPie","arcs","join","toLocaleString","centroid","endAngle","startAngle","ref","piechart","PieChartPage","pieChartPage","Map","mapData","cityData","projection","geo","scale","center","translate","path","colors","d3Color","renderMap","features","i","renderCity","coor","lat","addEvent","tooltip","html","style","pageX","pageY","ChinaMapPage","setMapData","setCityData","mapJson","cityJson","chinaMapPage","SVGTree","dy","tree","nodeSize","diagonal","root","x0","y0","descendants","forEach","_children","children","depth","renderSVGTree","gLink","gNode","update","source","altKey","nodes","links","eachBefore","tween","window","ResizeObserver","dispatch","nodeEnter","updateNode","lower","link","linkEnter","o","svgTree","SVGTreePage","treeJson","readJson","svgTreePage","Header","Footer","Sider","Content","Boolean","location","hostname","match","ReactDOM","basename","app","container","theme","mode","defaultSelectedKeys","lineHeight","Item","key","sideBarMenu","to","exact","footer","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"qGACAA,EAAOC,QAAU,CAAC,KAAO,mBAAmB,QAAU,wB,oBCAtDD,EAAOC,QAAU,CAAC,SAAW,4B,oBCA7BD,EAAOC,QAAU,CAAC,aAAe,qC,oBCAjCD,EAAOC,QAAU,CAAC,UAAY,+B,oBCA9BD,EAAOC,QAAU,CAAC,cAAgB,uC,oBCAlCD,EAAOC,QAAU,CAAC,SAAW,6B,oBCA7BD,EAAOC,QAAU,CAAC,aAAe,qC,oBCAjCD,EAAOC,QAAU,CAAC,IAAM,mB,oBCAxBD,EAAOC,QAAU,CAAC,aAAe,qC,oBCAjCD,EAAOC,QAAU,CAAC,QAAU,2B,gPCYbC,MAVf,WACE,OACE,yBAAKC,UAAWC,IAAIC,MAClB,yBAAKF,UAAWC,IAAIE,SAApB,gC,iECIN,SAASC,IACP,SAASC,IACP,OAAOC,KAAKC,MAA4B,OAArB,EAAID,KAAKE,WACzBC,SAAS,IACTC,UAAU,GAEf,MAAO,MAAQL,IAAOA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAOA,IAAOA,I,sBCdrEM,E,WACnB,aAAe,oBACbC,KAAKC,OAAS,IACdD,KAAKE,QAAU,IACfF,KAAKG,SAAW,CAAEC,IAAK,GAAIC,KAAM,GAAIC,MAAO,GAAIC,OAAQ,IACxDP,KAAKQ,MAAQ,GACbR,KAAKS,QAAU,KACfT,KAAKU,QAAU,KACfV,KAAKW,QAAUC,IAAgBA,KAC/BZ,KAAKa,KAAO,KACZb,KAAKc,KAAO,KACZd,KAAKe,MAAQ,K,kDAETC,GACJ,OAAyB,IAArBC,UAAUC,OAAqBlB,KAAKC,QACxCD,KAAKC,OAASe,EACPhB,Q,6BAEFmB,GACL,OAAyB,IAArBF,UAAUC,OAAqBlB,KAAKE,SACxCF,KAAKE,QAAUiB,EACRnB,Q,8BAEDoB,GACN,OAAyB,IAArBH,UAAUC,OAAqBlB,KAAKG,UACxCH,KAAKG,SAAWiB,EACTpB,Q,2BAEJqB,GACH,OAAyB,IAArBJ,UAAUC,OAAqBlB,KAAKQ,OACxCR,KAAKQ,MAAQa,EACNrB,Q,6BAEFsB,GACL,OAAyB,IAArBL,UAAUC,OAAqBlB,KAAKS,SACxCT,KAAKS,QAAUa,EACRtB,Q,6BAEFuB,GACL,OAAyB,IAArBN,UAAUC,OAAqBlB,KAAKU,SACxCV,KAAKU,QAAUa,EACRvB,Q,0BAELwB,GACF,OAAyB,IAArBP,UAAUC,OAAqBlB,KAAKc,MACxCd,KAAKc,KAAOU,EACLxB,Q,2BAEJyB,GACH,OAAyB,IAArBR,UAAUC,OAAqBlB,KAAKe,OACxCf,KAAKe,MAAQU,EACNzB,Q,0BAELyB,GACF,OAAyB,IAArBR,UAAUC,OAAqBlB,KAAKa,MACxCb,KAAKa,KAAOY,EACLzB,Q,qCAGP,IAAI0B,EAAQ1B,KAAKC,OAASD,KAAKG,SAASE,KAAOL,KAAKG,SAASG,MAC7D,OAAOoB,EAAQ,EAAIA,EAAQ,I,sCAG3B,IAAIC,EAAS3B,KAAKE,QAAUF,KAAKG,SAASC,IAAMJ,KAAKG,SAASI,OAC9D,OAAOoB,EAAS,EAAIA,EAAS,I,+BAG7B,OAAO3B,O,8BAGP,OAAOA,KAAKG,SAASE,O,8BAGrB,OAAOL,KAAKG,SAASC,M,uCAGrB,IAEMwB,EAAW5B,KAAKc,KAAKe,OAAO,QAC9BD,GACFA,EAASE,SAGX9B,KAAKc,KACFiB,OAAO,QACPA,OAAO,YACPC,KAAK,KAAM,QACXD,OAAO,QACPC,KAAK,QAAShC,KAAKiC,eAAiBC,IACpCF,KAAK,SAAUhC,KAAKmC,gBAAkBD,IACtCF,KAAK,KAdQ,IAebA,KAAK,KAfQ,M,mCAkBXhC,KAAKe,QACRf,KAAKe,MAAQf,KAAKc,KACfiB,OAAO,KACPC,KAAK,QAAS,cACdA,KAAK,YAAa,aAAehC,KAAKoC,QAAU,IAAMpC,KAAKqC,QAAU,KACrEL,KAAK,YAAa,iB,kCAKlBhC,KAAKa,OACRb,KAAKa,KAAOD,IACF,QACPmB,OAAO,OACPC,KAAK,QAAS,oB,kCAKdhC,KAAKc,OACRd,KAAKc,KAAOd,KAAKa,KACdkB,OAAO,OACPC,KAAK,QAAShC,KAAKC,QACnB+B,KAAK,SAAUhC,KAAKE,Y,oCAKzBF,KAAKsC,YAELtC,KAAKuC,YAELvC,KAAKwC,iBAELxC,KAAKyC,aAELzC,KAAK0C,a,uBCwEMC,MAnMf,YAA+C,IAA3BC,EAA0B,EAA1BA,OAA0B,IAAlBxD,iBAAkB,MAAN,GAAM,EACtCyD,EAAUC,iBAAOtD,KAEjBuD,EAAWD,iBAAO,IAAI/C,GAwL5B,OAtLAiD,qBAAU,WAER,IAAMC,EAAMrC,IAAA,WAAciC,EAAQK,UAC5BC,EAAQJ,EAASG,QACvBC,EAAMF,IAAIA,GAGVE,EAAMC,QAAQR,EAAOQ,SAGrB,IAAMC,EAAOC,IAAEC,IAAIX,EAAQ,OAAQ,KAAO,GAGpCY,EAAS5C,MAEZ6C,OAAOJ,EAAKK,KAAI,SAAArC,GAAC,OAAIA,EAAEsC,SACvBC,MAAM,CAAC,EAAGT,EAAMlB,iBAChBC,QAAQU,EAAOiB,YAClBV,EAAMK,OAAOA,GACb,IAAMM,EAASlD,MAEZ6C,OAAO,CAAC,EAAG7C,IAAOyC,GAAM,SAAAhC,GAAC,OAAIA,EAAE0C,WAC/BH,MAAM,CAACT,EAAMhB,gBAAiB,IACjCgB,EAAMW,OAAOA,GAGbX,EAAMa,WAAa,WACjB,IAAMC,EAAOd,EACVe,OACAC,UAAU,kBACVd,KAAKA,GACRY,EACGG,QACArC,OAAO,QACPC,KAAK,QAAS,iBACdqC,MAAMJ,GACNjC,KAAK,KAAK,SAAAX,GAAC,OAAI8B,EAAMK,QAANL,CAAe9B,EAAEsC,SAChC3B,KAAK,IAAKmB,EAAMW,QAANX,CAAe,IACzBnB,KAAK,QAASmB,EAAMK,SAASc,aAC7BtC,KAAK,SAAU,GACfA,KAAK,OAAQY,EAAO2B,UACpBC,aACAC,SAAS7B,EAAO8B,iBAChB1C,KAAK,UAAU,SAAAX,GAAC,OAAI8B,EAAMhB,gBAAkBgB,EAAMW,QAANX,CAAe9B,EAAE0C,UAC7D/B,KAAK,KAAK,SAAAX,GAAC,OAAI8B,EAAMW,QAANX,CAAe9B,EAAE0C,UACnCE,EAAKU,OAAO7C,UAIdqB,EAAMyB,QAAU,WACdzB,EAAM0B,MAAMhD,OAAO,oBAAoBC,SAEvCqB,EACG0B,MACAC,OAAO,IAAK,eACZ9C,KAAK,YAHR,oBAGkCmB,EAAMf,QAHxC,aAGoDe,EAAMd,QAAUc,EAAMhB,gBAH1E,MAIGH,KAAK,QAAS,mBACd+C,KAAKnE,IAAcuC,EAAMK,YAG9BL,EAAM6B,QAAU,WACd7B,EAAM0B,MAAMhD,OAAO,oBAAoBC,SAEvCqB,EACG0B,MACAC,OAAO,IAAK,eACZ9C,KAAK,YAHR,oBAGkCmB,EAAMf,QAHxC,aAGoDe,EAAMd,QAH1D,MAIGL,KAAK,QAAS,mBACd+C,KAAKnE,IAAYuC,EAAMW,YAI5BX,EAAM8B,WAAa,WACjBrE,IAAU,oBACPmB,OAAO,QACPC,KAAK,QAAS,sBACdA,KAAK,IAAKmB,EAAMlB,gBAChBD,KAAK,IAAK,GACVA,KAAK,OAAQY,EAAOsC,WACpBlD,KAAK,KAAM,IACXmD,KAAK,gBAERvE,IAAU,oBACPmB,OAAO,QACPC,KAAK,QAAS,sBACdA,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,OAAQY,EAAOsC,WACpBlD,KAAK,YAAa,eAClBA,KAAK,MAAO,IACZA,KAAK,cAAe,OACpBmD,KAAK,sCAIVhC,EAAMiC,WAAa,WACjBxE,IAAa,0BAA0ByE,MAAK,SAAShE,GAC/CuB,EAAO0C,aAAaC,QAAQlE,IAAM,GACpCT,IAAUZ,MACP+B,OAAO,QACPC,KAAK,QAAS,kBACdA,KAAK,SAAUY,EAAO4C,WACtBxD,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmB,EAAMlB,gBACjBD,KAAK,KAAM,OAMpBmB,EAAMsC,WAAa,WACjBtC,EAAMyB,UACNzB,EAAM6B,UACN7B,EAAM8B,aACN9B,EAAMiC,cAIRjC,EAAMuC,WAAa,WAgBjB9E,IAAa,kBACV+E,GAAG,aAAa,SAAStE,GACxB,IAAMuE,EAAIhF,IACJiF,EAAWjF,IAASuC,EAAM0B,MAAMiB,QAEtClF,IAAUgF,EAAEG,QAAQ/D,KAAK,OAAQY,EAAOoD,YAExC7C,EACG0B,MACA9C,OAAO,QACPkE,QAAQ,iBAAiB,GACzBjE,KAAK,IAAK6D,EAAS,GAAK,GACxB7D,KAAK,IAAK6D,EAAS,IACnB7D,KAAK,OAAQY,EAAOsC,WACpBC,KAPH,wBAOe9D,EAAE0C,MAPjB,cASD4B,GAAG,cAAc,WAChB,IAAMC,EAAIhF,IACVA,IAAUgF,EAAEG,QAAQ/D,KAAK,OAAQmB,EAAMxC,QAAQ,IAE/CC,IAAU,kBAAkBkB,YAE7B6D,GACC,aAOA,WACE,IAAME,EAAWjF,IAASuC,EAAM0B,MAAMiB,QACtClF,IAAU,kBACPoB,KAAK,IAAK6D,EAAS,GAAK,GACxB7D,KAAK,IAAK6D,EAAS,GAAK,OAKnC1C,EAAMT,OAAS,WACbS,EAAMa,aACNb,EAAMsC,aACNtC,EAAMuC,cAERvC,EAAM+C,gBACL,CAACtD,IAEG,yBAAKuD,GAAItD,EAAQK,QAAS9D,UAAWgH,IAAE/G,IAAIgH,SAAUjH,EAAW,oB,kBChJ1DkH,MA9Cf,WAAyB,IAAD,EACEC,mBAAS,IADX,mBACflD,EADe,KACTmD,EADS,KAGtBxD,qBAAU,YACQ,mBAAAyD,EAAAC,OAAA,2EAAAD,EAAA,MAEW7F,IAAO+F,yBAAsC,SAAStF,GAC3E,MAAO,CACLsC,KAAMtC,EAAEsC,KACRI,OAAQ1C,EAAE0C,WALF,OAEN6C,EAFM,OASZC,QAAQC,IAAI,aAAcF,GAC1BJ,EAAQI,GAVI,gDAaZC,QAAQC,IAAI,MAAZ,MAbY,wDAgBhBC,KACC,IAEH,IAAMnE,EAASoE,mBACb,iBAAO,CACL3D,OACA4D,MAAO,qBACP7D,QAAS,CAAEhD,IAAK,GAAIC,KAAM,GAAIE,OAAQ,GAAID,MAAO,IACjDuD,WAAY,IACZU,SAAU,UACVW,UAAW,QACXM,UAAW,OACXF,aAAc,CAAC,GAAI,IAAK,KACxBU,WAAY,UACZtB,gBAAiB,OAEnB,CAACrB,IAGH,OACE,yBAAKjE,UAAWC,IAAI6H,cAClB,kBAAC,EAAD,CAAUtE,OAAQA,M,4CCkGTuE,MAxIf,YAAgD,IAA3BvE,EAA0B,EAA1BA,OAA0B,IAAlBxD,iBAAkB,MAAN,GAAM,EACvCyD,EAAUC,iBAAOtD,KAEjBuD,EAAWD,iBAAO,IAAI/C,GA6H5B,OA3HAiD,qBAAU,WAER,IAAMC,EAAMrC,IAAA,WAAciC,EAAQK,UAC5BC,EAAQJ,EAASG,QACvBC,EAAMF,IAAIA,GAGVE,EAAMC,QAAQR,EAAOQ,SAGrB,IAAMC,EAAOC,IAAEC,IAAIX,EAAQ,OAAQ,KAAO,GAEpCwE,EAAYxG,IAAa,YAEzBU,EAAIV,MAEP6C,OAAO7C,IAAUyC,GAAM,SAAAhC,GAAC,OAAI+F,EAAU/F,EAAEsC,UACxCC,MAAM,CAAC,EAAGT,EAAMlB,iBAGbV,EAAIX,MAEP6C,OAAO,CAAC,EAAG7C,IAAOyC,GAAM,SAAAhC,GAAC,OAAIA,EAAEgG,WAC/BC,OACA1D,MAAM,CAACT,EAAMhB,gBAAiB,IAG3BoF,EAAO3G,MAEV4G,SAAQ,SAAAnG,GAAC,OAAKoG,OAAOC,OAAOrG,EAAEgG,UAC9B/F,GAAE,SAAAD,GACD,OAAOC,EAAE8F,EAAU/F,EAAEsC,UAEtBpC,GAAE,SAAAF,GACD,OAAOE,EAAEF,EAAEgG,UAITM,EAAQ,SAAAC,GAAC,OACbA,EACG5F,KAAK,QAAS,oBACdA,KAAK,YAFR,oBAEkCmB,EAAMf,QAFxC,aAEoDe,EAAMd,QAAUc,EAAMhB,gBAF1E,MAGG4C,KACCnE,IACcU,GACXuG,MAAM1E,EAAMzB,QAAU,IACtBoG,cAAc,KAIjBC,EAAQ,SAAAH,GAAC,OACbA,EACG5F,KAAK,QAAS,oBACdA,KAAK,YAFR,oBAEkCmB,EAAMf,QAFxC,aAEoDe,EAAMd,QAF1D,MAGG0C,KAAKnE,IAAYW,IAEjBwD,MAAK,SAAA6C,GAAC,OACLA,EACG/F,OAAO,2BACPmG,QACAhG,KAAK,IAAK,GACVA,KAAK,cAAe,SACpBA,KAAK,cAAe,QACpBmD,KAAK,eAGdhC,EAAMsC,WAAa,WACjBtC,EACG0B,MACAhD,OAAO,qBACPC,SACHqB,EACG0B,MACAhD,OAAO,qBACPC,SAEHqB,EACG0B,MACA9C,OAAO,KACPgD,KAAK4C,GAERxE,EACG0B,MACA9C,OAAO,KACPgD,KAAKgD,IAGV5E,EAAM8E,WAAa,WACjB9E,EACG0B,MACAhD,OAAO,4BACPC,SACHqB,EACG0B,MACAhD,OAAO,oBACPC,SACHqB,EACGe,OACAnC,OAAO,QACPC,KAAK,QAAS,2BACdkG,MAAM7E,EAAK8E,OAAOZ,EAAKC,YACvBxF,KAAK,SAAUY,EAAOoD,YACtBhE,KAAK,OAAQ,QACbA,KAAK,IAAKuF,GACbpE,EACGe,OACAnC,OAAO,QACPC,KAAK,QAAS,mBACdkG,MAAM7E,GACNrB,KAAK,SAAUY,EAAOwF,WACtBpG,KAAK,eAAgB,KACrBA,KAAK,OAAQ,QACbA,KAAK,IAAKuF,IAGfpE,EAAMT,OAAS,WACbS,EAAMsC,aACNtC,EAAM8E,cAGR9E,EAAM+C,gBACL,CAACtD,IAEG,yBAAKuD,GAAItD,EAAQK,QAAS9D,UAAWgH,IAAE/G,IAAIgJ,UAAWjJ,EAAW,qB,kBChF3DkJ,MAlDf,WAA0B,IAAD,EACC/B,mBAAS,IADV,mBAChBlD,EADgB,KACVmD,EADU,KAGvBxD,qBAAU,YACQ,mBAAAyD,EAAAC,OAAA,2EAAAD,EAAA,MAEW7F,IAAO+F,yBAAsC,SAAStF,GAC3E,MAAO,CACLsC,KAAM4E,IAAMlH,EAAEsC,KAAM,eAAe6E,OAAO,cAC1CnB,OAAQhG,EAAEoH,SALF,OAEN7B,EAFM,OAQZJ,EACEI,EACGuB,QAAO,SAAA9G,GAAC,OAAKoG,OAAOC,MAAMrG,EAAEgG,UAC5B3D,KAAI,SAAArC,GAAC,sBACDA,EADC,CAEJgG,MAAOkB,IAAMlH,EAAEsC,KAAM,cAAc+E,QAAU,OAAIC,EAAYtH,EAAEgG,YAbzD,gDAkBZR,QAAQC,IAAI,MAAZ,MAlBY,wDAqBhBC,KACC,IAEH,IAAMnE,EAASoE,mBACb,iBAAO,CACL3D,OACA4D,MAAO,qBACP7D,QAAS,CAAEhD,IAAK,GAAIC,KAAM,GAAIE,OAAQ,GAAID,MAAO,IACjDuD,WAAY,IACZuE,UAAW,UACXlD,UAAW,QACXM,UAAW,OACXQ,WAAY,UACZtB,gBAAiB,OAEnB,CAACrB,IAGH,OACE,yBAAKjE,UAAWC,IAAIuJ,eAClB,kBAAC,EAAD,CAAWhG,OAAQA,M,kBC6EViG,MAxHf,YAA+C,IAA3BjG,EAA0B,EAA1BA,OAA0B,IAAlBxD,iBAAkB,MAAN,GAAM,EACtCyD,EAAUC,iBAAOtD,KAEjBuD,EAAWD,iBAAO,IAAI/C,GAEtB+I,EAAiBhG,mBA2GvB,OAzGAE,qBAAU,WAER,IAAMC,EAAMrC,IAAA,WAAciC,EAAQK,UAC5BC,EAAQJ,EAASG,QACvBC,EAAMF,IAAIA,GAGVE,EAAMC,QAAQR,EAAOQ,SACrB,IAAMzB,EAASmH,EAAe5F,QAAQ6F,aAChCrH,EAAQoH,EAAe5F,QAAQ8F,YACrC7F,EAAMzB,MAAMA,GACZyB,EAAMxB,OAAOA,GAGb,IAAM0B,EAAOC,IAAEC,IAAIX,EAAQ,OAAQ,KAAO,GAGpCqG,EAAQrI,MAEX6C,OAAOJ,EAAKK,KAAI,SAAArC,GAAC,OAAIA,EAAE6H,SACvBtF,MAAMhD,KAAY,SAAAuI,GAAC,OAAIvI,IAA2B,GAAJuI,EAAU,MAAM9F,EAAKnC,QAAQkI,WAGxEC,EAAMzI,MAET0I,YAAY5J,KAAK6J,IAAIpG,EAAMlB,eAAgBkB,EAAMhB,iBAAmB,EAAI,GACxEqH,YAAY9J,KAAK6J,IAAIpG,EAAMlB,eAAgBkB,EAAMhB,iBAAmB,EAAI,GAGrEsH,EAAkB/J,KAAK6J,IAAIpG,EAAMlB,eAAgBkB,EAAMhB,iBAAmB,EAAK,GAC/EuH,EAAW9I,MAEd0I,YAAYG,GACZD,YAAYC,GAGTE,EAAM/I,MAETgJ,KAAK,MACLvC,OAAM,SAAAhG,GAAC,OAAIA,EAAEgG,SAGhBlE,EAAM0G,UAAY,WAEhB,IAAMC,EAAOH,EAAItG,GAEjBF,EACGe,OACArC,OAAO,kBACPC,SACHqB,EACGe,OACArC,OAAO,wBACPC,SAGHqB,EACGe,OACAnC,OAAO,KACPC,KAAK,YAHR,oBAGkCmB,EAAMlB,eAAiB,EAHzD,aAG+DkB,EAAMhB,gBAAkB,EAHvF,MAIGH,KAAK,QAAS,iBACdA,KAAK,SAAU,SACfmC,UAAU,QACVd,KAAKyG,GACLC,KAAK,QACL/H,KAAK,QAAQ,SAAAX,GAAC,OAAI4H,EAAM5H,EAAEgC,KAAK6F,SAC/BlH,KAAK,IAAKqH,GACVtH,OAAO,SACPoD,MAAK,SAAA9D,GAAC,gBAAOA,EAAEgC,KAAK6F,KAAd,aAAuB7H,EAAEgC,KAAKgE,MAAM2C,qBAE7C7G,EACGe,OACAnC,OAAO,KACPC,KAAK,YAHR,oBAGkCmB,EAAMlB,eAAiB,EAHzD,aAG+DkB,EAAMhB,gBAAkB,EAHvF,MAIGH,KAAK,QAAS,uBACdA,KAAK,cAAe,cACpBA,KAAK,YAAa,IAClBA,KAAK,cAAe,UACpBmC,UAAU,QACVd,KAAKyG,GACLC,KAAK,QACL/H,KAAK,aAAa,SAAAX,GAAC,0BAAiBqI,EAASO,SAAS5I,GAAnC,QACnB0D,MAAK,SAAAI,GAAI,OAAIA,EAAKpD,OAAO,YACzBC,KAAK,IAAK,UACVA,KAAK,cAAe,QACpBmD,MAAK,SAAA9D,GAAC,OAAIA,EAAEgC,KAAK6F,QACjBnE,MAAK,SAAAI,GAAI,OACRA,EACGgD,QAAO,SAAA9G,GAAC,OAAIA,EAAE6I,SAAW7I,EAAE8I,WAAa,OACxCpI,OAAO,SACPC,KAAK,IAAK,GACVA,KAAK,IAAK,SACVA,KAAK,eAAgB,IACrBmD,MAAK,SAAA9D,GAAC,OAAIA,EAAEgC,KAAKgE,MAAM2C,wBAIhC7G,EAAMT,OAAS,WAEbS,EAAM0G,aAGR1G,EAAM+C,gBACL,CAACtD,IAEG,yBAAKwH,IAAKtB,EAAgB3C,GAAItD,EAAQK,QAAS9D,UAAWgH,IAAE/G,IAAIgL,SAAUjL,EAAW,oB,kBChF/EkL,MAnCf,WAAyB,IAAD,EACE/D,mBAAS,IADX,mBACflD,EADe,KACTmD,EADS,KAGtBxD,qBAAU,YACQ,mBAAAyD,EAAAC,OAAA,2EAAAD,EAAA,MAEW7F,IAAO+F,uCAFlB,OAENC,EAFM,OAGZJ,EAAQI,GAHI,gDAMZC,QAAQC,IAAI,MAAZ,MANY,wDAShBC,KACC,IAEH,IAAMnE,EAASoE,mBACb,iBAAO,CACL3D,OACA4D,MAAO,qBACP7D,QAAS,CAAEhD,IAAK,GAAIC,KAAM,GAAIE,OAAQ,GAAID,MAAO,IACjD4E,UAAW,QACXM,UAAW,OACXd,gBAAiB,OAEnB,CAACrB,IAGH,OACE,yBAAKjE,UAAWC,IAAIkL,cAClB,kBAAC,EAAD,CAAU3H,OAAQA,M,4CCuGT4H,MA/Hf,YAA0C,IAA3B5H,EAA0B,EAA1BA,OAA0B,IAAlBxD,iBAAkB,MAAN,GAAM,EACjCyD,EAAUC,iBAAOtD,KAEjBuD,EAAWD,iBAAO,IAAI/C,GAEtB+I,EAAiBhG,mBAkHvB,OAhHAE,qBAAU,WAER,IAAMC,EAAMrC,IAAA,WAAciC,EAAQK,UAC5BC,EAAQJ,EAASG,QACvBC,EAAMF,IAAIA,GAGVE,EAAMC,QAAQR,EAAOQ,SACrB,IAAMzB,EAASmH,EAAe5F,QAAQ6F,aAChCrH,EAAQoH,EAAe5F,QAAQ8F,YACrC7F,EAAMzB,MAAMA,GACZyB,EAAMxB,OAAOA,GAGb,IAAM8I,EAAUnH,IAAEC,IAAIX,EAAQ,OAAQ,KAAO,GACvC8H,EAAWpH,IAAEC,IAAIX,EAAQ,WAAY,KAAO,GAG5C+H,EAAaC,MAEhBC,MAAM,KACNC,OAAO,CAAC,IAAK,KACbC,UAAU,CAAC5H,EAAMlB,eAAiB,EAAGkB,EAAMhB,gBAAkB,IAG1D6I,EAAOJ,IAAYD,GAGnBM,EAASrK,IAAgBsK,IAAqB,KAIpD/H,EAAMgI,UAAY,WACXV,EAAQW,WAGbjI,EACGe,OACAC,UAAU,aACVrC,SACHqB,EACGe,OACAC,UAAU,QACVd,KAAKoH,EAAQW,UACbhH,QACArC,OAAO,QACPC,KAAK,QAAS,YACdA,KAAK,IAAKgJ,GACVhJ,KAAK,QAAQ,SAACX,EAAGgK,GAAJ,OAAUJ,EAAOI,MAC9BrJ,KAAK,SAAU,aACfA,KAAK,eAAgB,GACrBD,OAAO,SACPC,KAAK,MAIVmB,EAAMmI,WAAa,WACjBnI,EACGe,OACAC,UAAU,aACVd,KAAKqH,GACLtG,QACArC,OAAO,KACPC,KAAK,QAAS,YACdA,KAAK,aAAa,SAAAX,GACjB,IAAMkK,EAAOZ,EAAW,CAACtJ,EAAEyF,IAAKzF,EAAEmK,MAClC,MAAM,aAAN,OAAoBD,EAAK,GAAzB,aAAgCA,EAAK,GAArC,QAEDxJ,OAAO,UACPC,KAAK,IAAK,GACVA,KAAK,OAAQ,QACbA,KAAK,QAAS,mBAInBmB,EAAMsI,SAAW,WACf,IAAMC,EAAU9K,IAAU,sBAC1BuC,EACGe,OACAC,UAAU,aACVwB,GAAG,aAAa,SAAStE,GACxBqK,EACGC,KAAK,6BAAWtK,EAAE6H,MAClB0C,MAAM,OAAQhL,IAASiL,MAAQ,GAAK,MACpCD,MAAM,MAAOhL,IAASkL,MAAQ,GAAK,MACnCF,MAAM,UAAW,GAEpBhL,IAAUZ,MACP6B,OAAO,UACP2C,aACAC,SAAS,KACTzC,KAAK,IAAK,MAEd2D,GAAG,YAAY,WACd+F,EAAQE,MAAM,UAAW,GACzBhL,IAAUZ,MACP6B,OAAO,UACP2C,aACAC,SAAS,KACTzC,KAAK,IAAK,OAInBmB,EAAMT,OAAS,WACbS,EAAMgI,YACNhI,EAAMmI,aACNnI,EAAMsI,YAGRtI,EAAM+C,gBACL,CAACtD,IAEG,yBAAKwH,IAAKtB,EAAgB3C,GAAItD,EAAQK,QAAS9D,UAAWgH,IAAE/G,IAAIqE,IAAKtE,EAAW,oB,mBCpF1E2M,OAxCf,WAAyB,IAAD,EACQxF,mBAAS,IADjB,mBACfkE,EADe,KACNuB,EADM,OAEUzF,mBAAS,IAFnB,mBAEfmE,EAFe,KAELuB,EAFK,KAItBjJ,qBAAU,YACQ,qBAAAyD,EAAAC,OAAA,2EAAAD,EAAA,MAEU7F,IAAQ+F,4BAFlB,cAENuF,EAFM,OAGZF,EAAWE,GAHC,WAAAzF,EAAA,MAIW7F,IAAQ+F,2BAJnB,OAINwF,EAJM,OAKZF,EAAYE,GALA,kDAQZtF,QAAQC,IAAI,MAAZ,MARY,yDAWhBC,KACC,IAEH,IAAMnE,EAASoE,mBACb,iBAAO,CACL3D,KAAMoH,EACNC,SAAUpH,IAAEC,IAAImH,EAAU,SAAU,IACpCzD,MAAO,2BACP7D,QAAS,CAAEhD,IAAK,GAAIC,KAAM,GAAIE,OAAQ,GAAID,MAAO,IACjD4E,UAAW,QACXM,UAAW,OACXd,gBAAiB,OAEnB,CAAC+F,EAASC,IAGZ,OACE,yBAAKtL,UAAWC,KAAI+M,cAClB,kBAAC,EAAD,CAAKxJ,OAAQA,IACb,yBAAKuD,GAAG,wB,qBCsLCkG,OAtNf,YAA8C,IAA3BzJ,EAA0B,EAA1BA,OAA0B,IAAlBxD,iBAAkB,MAAN,GAAM,EACrCyD,EAAUC,iBAAOtD,KAEjBuD,EAAWD,iBAAO,IAAI/C,GAEtB+I,EAAiBhG,mBAyMvB,OAvMAE,qBAAU,WAER,IAAMC,EAAMrC,IAAA,WAAciC,EAAQK,UAC5BC,EAAQJ,EAASG,QACvBC,EAAMF,IAAIA,GAGVE,EAAMC,QAAQR,EAAOQ,SACrB,IAAMzB,EAASmH,EAAe5F,QAAQ6F,aAChCrH,EAAQoH,EAAe5F,QAAQ8F,YACrC7F,EAAMzB,MAAMA,GACZyB,EAAMxB,OAAOA,GAGb,IAAM0B,EAAOC,IAAEC,IAAIX,EAAQ,OAAQ,IAG7B0J,EAAK5K,EAAQ,EAEb6K,EAAO3L,MAAU4L,SAAS,CADrB,GAC0BF,IAG/BG,EAAW7L,MAEdU,GAAE,SAAAD,GAAC,OAAIA,EAAEE,KACTA,GAAE,SAAAF,GAAC,OAAIA,EAAEC,KAGNoL,EAAO9L,IAAayC,GAC1BqJ,EAAKC,GAAKL,EAAK,EACfI,EAAKE,GAAK,EACVF,EAAKG,cAAcC,SAAQ,SAACzL,EAAGgK,GAC7BhK,EAAE8E,GAAKkF,EACPhK,EAAE0L,UAAY1L,EAAE2L,SACZ3L,EAAE4L,OAAgC,IAAvB5L,EAAEgC,KAAK6F,KAAKhI,SACzBG,EAAE2L,SAAW,SAKjB7J,EAAMZ,UAAY,WAChBY,EAAMX,eAAiB,aAClBW,EAAM0B,OACT1B,EAAM0B,IACJ1B,EACGF,MACAlB,OAAO,OACPC,KAAK,QAAS,iBACdA,KAAK,UAAW,CAAC,EAAG,EAAGN,EA9BrB,KA+BFkK,MAAM,OAAQ,mBACdA,MAAM,cAAe,QACrB5J,KAAK,QAAShC,KAAKC,QACnB+B,KAAK,SAAUhC,KAAKE,WAK7BiD,EAAM+J,cAAgB,WACpB,IAAMC,EAAQhK,EACXe,OACAnC,OAAO,KACPC,KAAK,OAAQ,QACbA,KAAK,SAAU,QACfA,KAAK,iBAAkB,IACvBA,KAAK,eAAgB,KAElBoL,EAAQjK,EACXe,OACAnC,OAAO,KACPC,KAAK,SAAU,WACfA,KAAK,iBAAkB,QAE1B,SAASqL,EAAOC,GACd,IAAM7I,EAAW7D,KAAYA,IAAS2M,OAAS,KAAO,IAChDC,EAAQd,EAAKG,cAAczD,UAEjCvC,QAAQC,IAAI,UAAW0G,GACvB,IAAMC,EAAQf,EAAKe,QAGnBlB,EAAKG,GAGL,IAAIrM,EAAOqM,EACPpM,EAAQoM,EACZA,EAAKgB,YAAW,SAAA5H,GACVA,EAAKxE,EAAIjB,EAAKiB,IAChBjB,EAAOyF,GAELA,EAAKxE,EAAIhB,EAAMgB,IACjBhB,EAAQwF,MAIZ,IAAMnE,EAASrB,EAAMgB,EAAIjB,EAAKiB,EAAIsB,EAAOQ,QAAQhD,IAAMwC,EAAOQ,QAAQ7C,OAEhEiE,EAAarB,EAChB0B,MACAL,aACAC,SAASA,GACTzC,KAAK,UAAW,CAAC,EAAG3B,EAAKiB,EAAIsB,EAAOQ,QAAQhD,IAAKsB,EAAOC,IACxDK,KAAK,sBAAuB,iBAC5B2L,MAAM,SAAUC,OAAOC,eAAiB,KAAO,kBAAM,kBAAM1K,EAAM0B,MAAMiJ,SAAS,aAE7EhI,EAAOsH,EAAMjJ,UAAU,KAAKd,KAAKmK,GAAO,SAAAnM,GAAC,OAAIA,EAAE8E,MAE/C4H,EAAYjI,EACf1B,QACArC,OAAO,KACPC,KAAK,aAAa,SAAAX,GAAC,0BAAiBiM,EAAOV,GAAxB,aAA+BU,EAAOX,GAAtC,QACnB3K,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,GACvB2D,GAAG,SAAS,SAAAtE,GACXA,EAAE2L,SAAW3L,EAAE2L,SAAW,KAAO3L,EAAE0L,UACnCM,EAAOhM,MAGX0M,EACGhM,OAAO,UACPC,KAAK,IAAK,KACVA,KAAK,QAAQ,SAAAX,GAAC,OAAKA,EAAE0L,UAAY,OAAS,UAC1C/K,KAAK,eAAgB,IAGxB,IAAMgM,EAAalI,EAAKzB,MAAM0J,GAE9BC,EACGxJ,WAAWA,GACXxC,KAAK,aAAa,SAAAX,GAAC,0BAAiBA,EAAEE,EAAnB,aAAyBF,EAAEC,EAA3B,QACnBU,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,GAE1BmB,EACG0B,MACAV,UAAU,QACVrC,SAEHkM,EACGjM,OAAO,QACPC,KAAK,KAAM,UACXA,KAAK,KAAK,SAAAX,GAAC,OAAKA,EAAE2L,UAAY,EAAI,KAClChL,KAAK,eAAe,SAAAX,GAAC,OAAKA,EAAE2L,SAAW,MAAQ,WAC/C7H,MAAK,SAAA9D,GAAC,OAAIA,EAAEgC,KAAK6F,QACjBlB,OAAM,GACNiG,QACAjM,KAAK,kBAAmB,SACxBA,KAAK,eAAgB,GACrBA,KAAK,SAAU,SAGlB8D,EACGnB,OACAH,WAAWA,GACX1C,SACAE,KAAK,aAAa,SAAAX,GAAC,0BAAiBiM,EAAO/L,EAAxB,aAA8B+L,EAAOhM,EAArC,QACnBU,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,GAG1B,IAAMkM,EAAOf,EAAMhJ,UAAU,QAAQd,KAAKoK,GAAO,SAAApM,GAAC,OAAIA,EAAE0E,OAAOI,MAEzDgI,EAAYD,EACf9J,QACArC,OAAO,QACPC,KAAK,KAAK,SAAAX,GACT,IAAM+M,EAAI,CAAE9M,EAAGgM,EAAOX,GAAIpL,EAAG+L,EAAOV,IACpC,OAAOH,EAAS,CAAEa,OAAQc,EAAGrI,OAAQqI,OAGzCF,EACG7J,MAAM8J,GACN3J,WAAWA,GACXxC,KAAK,IAAKyK,GAEbyB,EACGvJ,OACAH,WAAWA,GACXxC,KAAK,KAAK,SAAAX,GACT,IAAM+M,EAAI,CAAE9M,EAAGgM,EAAOhM,EAAGC,EAAG+L,EAAO/L,GACnC,OAAOkL,EAAS,CAAEa,OAAQc,EAAGrI,OAAQqI,OAIzC1B,EAAKgB,YAAW,SAAArM,GACdA,EAAEsL,GAAKtL,EAAEC,EACTD,EAAEuL,GAAKvL,EAAEE,KAIb8L,CAAOX,IAGTvJ,EAAMT,OAAS,WACbS,EAAM+J,iBAGR/J,EAAM+C,gBACL,CAACtD,IAEG,yBAAKwH,IAAKtB,EAAgB3C,GAAItD,EAAQK,QAAS9D,UAAWgH,IAAE/G,KAAIgP,QAASjP,EAAW,e,qBC/K9EkP,OAnCf,WAAwB,IAAD,EACG/H,mBAAS,IADZ,mBACdlD,EADc,KACRmD,EADQ,KAGrBxD,qBAAU,YACS,mBAAAyD,EAAAC,OAAA,2EAAAD,EAAA,MAEU7F,IAAQ+F,8BAFlB,OAEP4H,EAFO,OAGb/H,EAAQ+H,GAHK,gDAMb1H,QAAQC,IAAI,MAAZ,MANa,wDASjB0H,KACC,IAEH,IAAM5L,EAASoE,mBACb,iBAAO,CACL3D,KAAMA,EACN4D,MAAO,qBACP7D,QAAS,CAAEhD,IAAK,GAAIC,KAAM,GAAIE,OAAQ,GAAID,MAAO,IACjD4E,UAAW,QACXM,UAAW,OACXd,gBAAiB,OAEnB,CAACrB,IAGH,OACE,yBAAKjE,UAAWC,KAAIoP,aAClB,kBAAC,GAAD,CAAS7L,OAAQA,M,oBCvBf8L,G,IAAAA,OAAQC,G,IAAAA,OAAQC,G,IAAAA,MAAOC,G,IAAAA,QCDXC,QACW,cAA7BlB,OAAOmB,SAASC,UAEe,UAA7BpB,OAAOmB,SAASC,UAEhBpB,OAAOmB,SAASC,SAASC,MACvB,2DCZNC,IAASxM,OAAO,mBFSD,WACb,OACE,kBAAC,IAAD,CAAQyM,SAAS,gBACf,yBAAK/P,UAAWC,KAAI+P,KAClB,uBAAQhQ,UAAWC,KAAIgQ,WACrB,kBAACX,GAAD,KACE,uBAAMY,MAAM,OAAOC,KAAK,aAAaC,oBAAqB,CAAC,KAAM5D,MAAO,CAAE6D,WAAY,SACpF,sBAAMC,KAAN,CAAWC,IAAI,KAAf,QAGJ,uBAAQvQ,UAAWC,KAAI6E,MACrB,kBAAC0K,GAAD,KACE,uBAAMxP,UAAWC,KAAIuQ,YAAaN,MAAM,QAAQC,KAAK,SAASC,oBAAqB,CAAC,SAClF,sBAAME,KAAN,CAAWC,IAAI,QACb,kBAAC,IAAD,CAAMvQ,UAAU,WAAWyQ,GAAG,SAA9B,SAIF,sBAAMH,KAAN,CAAWC,IAAI,OACb,kBAAC,IAAD,CAAMvQ,UAAU,WAAWyQ,GAAG,QAA9B,cAIF,sBAAMH,KAAN,CAAWC,IAAI,QACb,kBAAC,IAAD,CAAMvQ,UAAU,WAAWyQ,GAAG,SAA9B,eAIF,sBAAMH,KAAN,CAAWC,IAAI,OACb,kBAAC,IAAD,CAAMvQ,UAAU,WAAWyQ,GAAG,QAA9B,cAIF,sBAAMH,KAAN,CAAWC,IAAI,OACb,kBAAC,IAAD,CAAMvQ,UAAU,WAAWyQ,GAAG,QAA9B,cAIF,sBAAMH,KAAN,CAAWC,IAAI,WACb,kBAAC,IAAD,CAAMvQ,UAAU,WAAWyQ,GAAG,aAA9B,eAMN,kBAAChB,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO7D,KAAK,SACV,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,QACV,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,SACV,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,QACV,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,QACV,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,aACV,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAO8E,OAAK,EAAC9E,KAAK,KAChB,kBAAC,IAAD,CAAU6E,GAAG,cAKrB,kBAAClB,GAAD,CAAQvP,UAAWC,KAAI0Q,QAAvB,eEhFM,MAASC,SAASC,eAAe,SD6H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB,mBEpInBtR,EAAOC,QAAU,CAAC,IAAM,iBAAiB,UAAY,uBAAuB,KAAO,kBAAkB,YAAc,yBAAyB,OAAS,uB","file":"static/js/main.249b825a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__33MBa\",\"content\":\"Home_content__QwLiU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"barchart\":\"BarChat_barchart__5cRVK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"barChartPage\":\"BarChartPage_barChartPage__b45Pf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"linechart\":\"LineChart_linechart__3h562\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lineChartPage\":\"LineChartPage_lineChartPage__287VI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"piechart\":\"PieChart_piechart__2u9A2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChartPage\":\"PieChartPage_pieChartPage__cnWIt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"Map_map__UaOG-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapChartPage\":\"ChinaMapPage_mapChartPage__3U9fV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"svgTree\":\"SVGTree_svgTree__3rQmQ\"};","import React from 'react';\nimport css from './Home.module.scss';\n\nfunction Home() {\n  return (\n    <div className={css.home}>\n      <div className={css.content}>\n        这是D3工程\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","function compose(...funcs) {\n  if (funcs.length === 0) {\n    return arg => arg;\n  }\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n  return funcs.reduce((a, b) => (...args) => a(b(...args)));\n}\n\nfunction uuid() {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n  return 'id-' + s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n}\n\nfunction getRandomColor16() {\n  return '#' + (Math.floor(Math.random() * 0xFFFFFF)).toString(16);\n}\n\nexport { compose, uuid, getRandomColor16 };\n","import * as d3 from 'd3';\n\nexport default class Chart {\n  constructor() {\n    this._width = 600;\n    this._height = 400;\n    this._margins = { top: 30, left: 30, right: 30, bottom: 30 };\n    this._data = [];\n    this._scaleX = null;\n    this._scaleY = null;\n    this._colors = d3.scaleOrdinal(d3.schemeCategory10);\n    this._box = null;\n    this._svg = null;\n    this._body = null;\n  }\n  width(w) {\n    if (arguments.length === 0) return this._width;\n    this._width = w;\n    return this;\n  }\n  height(h) {\n    if (arguments.length === 0) return this._height;\n    this._height = h;\n    return this;\n  }\n  margins(m) {\n    if (arguments.length === 0) return this._margins;\n    this._margins = m;\n    return this;\n  }\n  data(d) {\n    if (arguments.length === 0) return this._data;\n    this._data = d;\n    return this;\n  }\n  scaleX(x) {\n    if (arguments.length === 0) return this._scaleX;\n    this._scaleX = x;\n    return this;\n  }\n  scaleY(y) {\n    if (arguments.length === 0) return this._scaleY;\n    this._scaleY = y;\n    return this;\n  }\n  svg(s) {\n    if (arguments.length === 0) return this._svg;\n    this._svg = s;\n    return this;\n  }\n  body(b) {\n    if (arguments.length === 0) return this._body;\n    this._body = b;\n    return this;\n  }\n  box(b) {\n    if (arguments.length === 0) return this._box;\n    this._box = b;\n    return this;\n  }\n  getBodyWidth() {\n    let width = this._width - this._margins.left - this._margins.right;\n    return width > 0 ? width : 0;\n  }\n  getBodyHeight() {\n    let height = this._height - this._margins.top - this._margins.bottom;\n    return height > 0 ? height : 0;\n  }\n  render() {\n    return this;\n  }\n  bodyX() {\n    return this._margins.left;\n  }\n  bodyY() {\n    return this._margins.top;\n  }\n  defineBodyClip() {\n    const padding = 10;\n\n    const clipPath = this._svg.select('defs');\n    if (clipPath) {\n      clipPath.remove();\n    }\n\n    this._svg\n      .append('defs')\n      .append('clipPath')\n      .attr('id', 'clip')\n      .append('rect')\n      .attr('width', this.getBodyWidth() + padding * 2)\n      .attr('height', this.getBodyHeight() + padding * 2)\n      .attr('x', -padding)\n      .attr('y', -padding);\n  }\n  renderBody() {\n    if (!this._body) {\n      this._body = this._svg\n        .append('g')\n        .attr('class', 'chart-body')\n        .attr('transform', 'translate(' + this.bodyX() + ',' + this.bodyY() + ')')\n        .attr('clip-path', 'url(#clip)');\n    }\n  }\n\n  renderBox() {\n    if (!this._box) {\n      this._box = d3\n        .select('body')\n        .append('div')\n        .attr('class', 'bar-chart-box');\n    }\n  }\n\n  renderSVG() {\n    if (!this._svg) {\n      this._svg = this._box\n        .append('svg')\n        .attr('width', this._width)\n        .attr('height', this._height);\n    }\n  }\n\n  renderChart() {\n    this.renderBox();\n\n    this.renderSVG();\n\n    this.defineBodyClip();\n\n    this.renderBody();\n\n    this.render();\n  }\n}\n","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport c from 'classnames';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { uuid } from 'utils/utils';\nimport Chart from 'Chart/Chart';\nimport css from './BarChat.module.scss';\n\nfunction BarChart({ config, className = '' }) {\n  const chartId = useRef(uuid());\n\n  const chartRef = useRef(new Chart());\n\n  useEffect(() => {\n    // 得到chart container, 并设置给chart.box\n    const box = d3.select(`#${chartId.current}`);\n    const chart = chartRef.current;\n    chart.box(box);\n\n    // 设置一下配置参数\n    chart.margins(config.margins);\n\n    // 拿出data\n    const data = _.get(config, 'data', []) || [];\n\n    // 尺度转换一下\n    const scaleX = d3\n      .scaleBand()\n      .domain(data.map(d => d.date))\n      .range([0, chart.getBodyWidth()])\n      .padding(config.barPadding);\n    chart.scaleX(scaleX);\n    const scaleY = d3\n      .scaleLinear()\n      .domain([0, d3.max(data, d => d.money)])\n      .range([chart.getBodyHeight(), 0]);\n    chart.scaleY(scaleY);\n\n    // 渲染柱形\n    chart.renderBars = function() {\n      const bars = chart\n        .body()\n        .selectAll('.bar-chart-bar')\n        .data(data);\n      bars\n        .enter()\n        .append('rect')\n        .attr('class', 'bar-chart-bar')\n        .merge(bars)\n        .attr('x', d => chart.scaleX()(d.date))\n        .attr('y', chart.scaleY()(0))\n        .attr('width', chart.scaleX().bandwidth())\n        .attr('height', 0)\n        .attr('fill', config.barColor)\n        .transition()\n        .duration(config.animateDuration)\n        .attr('height', d => chart.getBodyHeight() - chart.scaleY()(d.money))\n        .attr('y', d => chart.scaleY()(d.money));\n      bars.exit().remove();\n    };\n\n    // 渲染坐标轴\n    chart.renderX = function() {\n      chart.svg().select('.bar-chart-xaxis').remove()\n      // d3.select(`#${chartId.current} .bar-chart-xaxis`).remove();\n      chart\n        .svg()\n        .insert('g', '.chart-body')\n        .attr('transform', `translate(${chart.bodyX()}, ${chart.bodyY() + chart.getBodyHeight()})`)\n        .attr('class', 'bar-chart-xaxis')\n        .call(d3.axisBottom(chart.scaleX()));\n    };\n\n    chart.renderY = function() {\n      chart.svg().select('.bar-chart-yaxis').remove()\n      // d3.select(`#${chartId.current} .bar-chart-yaxis`).remove();\n      chart\n        .svg()\n        .insert('g', '.chart-body')\n        .attr('transform', `translate(${chart.bodyX()}, ${chart.bodyY()})`)\n        .attr('class', 'bar-chart-yaxis')\n        .call(d3.axisLeft(chart.scaleY()));\n    };\n\n    // 渲染X Y轴标签\n    chart.renderText = function() {\n      d3.select('.bar-chart-xaxis')\n        .append('text')\n        .attr('class', 'bar-chart-axisText')\n        .attr('x', chart.getBodyWidth())\n        .attr('y', 0)\n        .attr('fill', config.textColor)\n        .attr('dy', 30)\n        .text('日期');\n\n      d3.select('.bar-chart-yaxis')\n        .append('text')\n        .attr('class', 'bar-chart-axisText')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('fill', config.textColor)\n        .attr('transform', 'rotate(-90)')\n        .attr('dy', -40)\n        .attr('text-anchor', 'end')\n        .text('每日收入 (元)');\n    };\n\n    // 渲染网格线\n    chart.renderGrid = function() {\n      d3.selectAll('.bar-chart-yaxis .tick').each(function(d) {\n        if (config.tickShowGrid.indexOf(d) > -1) {\n          d3.select(this)\n            .append('line')\n            .attr('class', 'bar-chart-grid')\n            .attr('stroke', config.gridColor)\n            .attr('x1', 0)\n            .attr('y1', 0)\n            .attr('x2', chart.getBodyWidth())\n            .attr('y2', 0);\n        }\n      });\n    };\n\n    // 汇总坐标轴相关的所有方法\n    chart.renderAxis = function() {\n      chart.renderX();\n      chart.renderY();\n      chart.renderText();\n      chart.renderGrid();\n    };\n\n    // 绑定鼠标交互\n    chart.addMouseOn = function() {\n      // TODO: 防抖函数中 设置d3.event有问题\n      // // 防抖\n      // function debounce(fn, time) {\n      //   let timeId = null;\n      //   return function() {\n      //     const context = this;\n      //     const event = d3.event;\n      //     timeId && clearTimeout(timeId);\n      //     timeId = setTimeout(() => {\n      //       d3.event = event;\n      //       fn.apply(context, arguments);\n      //     }, time);\n      //   };\n      // }\n\n      d3.selectAll('.bar-chart-bar')\n        .on('mouseover', function(d) {\n          const e = d3.event;\n          const position = d3.mouse(chart.svg().node());\n\n          d3.select(e.target).attr('fill', config.hoverColor);\n\n          chart\n            .svg()\n            .append('text')\n            .classed('bar-chart-tip', true)\n            .attr('x', position[0] + 5)\n            .attr('y', position[1])\n            .attr('fill', config.textColor)\n            .text(`收入: ${d.money}元`);\n        })\n        .on('mouseleave', function() {\n          const e = d3.event;\n          d3.select(e.target).attr('fill', chart._colors(0)); // TODO: 是否要改成config.barColor\n\n          d3.select('.bar-chart-tip').remove();\n        })\n        .on(\n          'mousemove',\n          // debounce(function() {\n          //   const position = d3.mouse(chart.svg().node());\n          //   d3.select('.bar-chart-tip')\n          //     .attr('x', position[0] + 5)\n          //     .attr('y', position[1] - 5);\n          // }, 6),\n          function() {\n            const position = d3.mouse(chart.svg().node());\n            d3.select('.bar-chart-tip')\n              .attr('x', position[0] + 5)\n              .attr('y', position[1] - 5);\n          },\n        );\n    };\n\n    chart.render = function() {\n      chart.renderBars();\n      chart.renderAxis();\n      chart.addMouseOn();\n    };\n    chart.renderChart();\n  }, [config]);\n\n  return <div id={chartId.current} className={c(css.barchart, className, 'bar-chart-box')}></div>;\n}\n\nBarChart.propTypes = {\n  config: PropTypes.object.isRequired,\n  className: PropTypes.string,\n};\n\nexport default BarChart;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nimport BarChart from 'components/BarChart/BarChart';\nimport css from './BarChartPage.module.scss';\n\nfunction BarChartPage() {\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    const readCSV = async () => {\n      try {\n        const readData = await d3.csv(process.env.PUBLIC_URL + '/data.csv', function(d) {\n          return {\n            date: d.date,\n            money: +d.money,\n          };\n        });\n        // eslint-disable-next-line\n        console.log('readData: ', readData)\n        setData(readData);\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log('e: ', e);\n      }\n    };\n    readCSV();\n  }, []);\n\n  const config = useMemo(\n    () => ({\n      data,\n      title: '条形图',\n      margins: { top: 80, left: 80, bottom: 50, right: 80 },\n      barPadding: 0.15,\n      barColor: '#096dd9',\n      textColor: 'black',\n      gridColor: 'gray',\n      tickShowGrid: [60, 120, 180],\n      hoverColor: '#40a9ff',\n      animateDuration: 1000,\n    }),\n    [data],\n  );\n\n  return (\n    <div className={css.barChartPage}>\n      <BarChart config={config} />\n    </div>\n  );\n}\n\nexport default BarChartPage;\n","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport c from 'classnames';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { uuid } from 'utils/utils';\nimport Chart from 'Chart/Chart';\nimport css from './LineChart.module.scss';\n\nfunction LineChart({ config, className = '' }) {\n  const chartId = useRef(uuid());\n\n  const chartRef = useRef(new Chart());\n\n  useEffect(() => {\n    // 得到chart container, 并设置给chart.box\n    const box = d3.select(`#${chartId.current}`);\n    const chart = chartRef.current;\n    chart.box(box);\n\n    // 设置一下配置参数\n    chart.margins(config.margins);\n\n    // 拿出data\n    const data = _.get(config, 'data', []) || [];\n\n    const parseDate = d3.timeParse('%Y-%m-%d');\n    // x\n    const x = d3\n      .scaleUtc()\n      .domain(d3.extent(data, d => parseDate(d.date)))\n      .range([0, chart.getBodyWidth()]);\n\n    // y\n    const y = d3\n      .scaleLinear()\n      .domain([0, d3.max(data, d => d.value)])\n      .nice()\n      .range([chart.getBodyHeight(), 0]);\n\n    // line\n    const line = d3\n      .line()\n      .defined(d => !Number.isNaN(+d.value))\n      .x(d => {\n        return x(parseDate(d.date));\n      })\n      .y(d => {\n        return y(d.value);\n      });\n\n    // xAxis\n    const xAxis = g =>\n      g\n        .attr('class', 'line-chart-xaxis')\n        .attr('transform', `translate(${chart.bodyX()}, ${chart.bodyY() + chart.getBodyHeight()})`)\n        .call(\n          d3\n            .axisBottom(x)\n            .ticks(chart.width() / 80)\n            .tickSizeOuter(0),\n        );\n\n    // yAxis\n    const yAxis = g =>\n      g\n        .attr('class', 'line-chart-yaxis')\n        .attr('transform', `translate(${chart.bodyX()}, ${chart.bodyY()})`)\n        .call(d3.axisLeft(y))\n        // .call(g => g.select('.domain').remove())\n        .call(g =>\n          g\n            .select('.tick:last-of-type text')\n            .clone()\n            .attr('x', 3)\n            .attr('text-anchor', 'start')\n            .attr('font-weight', 'bold')\n            .text('$ Close'),\n        );\n\n    chart.renderAxis = function() {\n      chart\n        .svg()\n        .select('.line-chart-xaxis')\n        .remove();\n      chart\n        .svg()\n        .select('.line-chart-yaxis')\n        .remove();\n\n      chart\n        .svg()\n        .append('g')\n        .call(xAxis);\n        \n      chart\n        .svg()\n        .append('g')\n        .call(yAxis);\n    };\n\n    chart.renderLine = function() {\n      chart\n        .svg()\n        .select('.line-chart-line-defined')\n        .remove();\n      chart\n        .svg()\n        .select('.line-chart-line')\n        .remove();\n      chart\n        .body()\n        .append('path')\n        .attr('class', 'line-chart-line-defined')\n        .datum(data.filter(line.defined()))\n        .attr('stroke', config.hoverColor)\n        .attr('fill', 'none')\n        .attr('d', line);\n      chart\n        .body()\n        .append('path')\n        .attr('class', 'line-chart-line')\n        .datum(data)\n        .attr('stroke', config.lineColor)\n        .attr('stroke-width', 1.5)\n        .attr('fill', 'none')\n        .attr('d', line);\n    };\n\n    chart.render = function() {\n      chart.renderAxis();\n      chart.renderLine();\n    };\n\n    chart.renderChart();\n  }, [config]);\n\n  return <div id={chartId.current} className={c(css.linechart, className, 'line-chart-box')}></div>;\n}\n\nLineChart.propTypes = {\n  config: PropTypes.object.isRequired,\n  className: PropTypes.string,\n};\n\nexport default LineChart;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport dayjs from 'dayjs';\n\nimport LineChart from 'components/LineChart/LineChart';\nimport css from './LineChartPage.module.scss';\n\nfunction LineChartPage() {\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    const readCSV = async () => {\n      try {\n        const readData = await d3.csv(process.env.PUBLIC_URL + '/aapl.csv', function(d) {\n          return {\n            date: dayjs(d.date, 'MMM D, YYYY').format('YYYY-MM-DD'),\n            value: +d.val,\n          };\n        });\n        setData(\n          readData\n            .filter(d => !Number.isNaN(d.value))\n            .map(d => ({\n              ...d,\n              value: dayjs(d.date, 'YYYY-MM-DD').month() < 3 ? undefined : d.value,\n            })),\n        );\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log('e: ', e);\n      }\n    };\n    readCSV();\n  }, []);\n\n  const config = useMemo(\n    () => ({\n      data,\n      title: '线形图',\n      margins: { top: 80, left: 80, bottom: 50, right: 80 },\n      barPadding: 0.15,\n      lineColor: '#096dd9',\n      textColor: 'black',\n      gridColor: 'gray',\n      hoverColor: '#40a9ff',\n      animateDuration: 1000,\n    }),\n    [data],\n  );\n\n  return (\n    <div className={css.lineChartPage}>\n      <LineChart config={config} />\n    </div>\n  );\n}\n\nexport default LineChartPage;\n","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport c from 'classnames';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { uuid } from 'utils/utils';\nimport Chart from 'Chart/Chart';\nimport css from './PieChart.module.scss';\n\nfunction PieChart({ config, className = '' }) {\n  const chartId = useRef(uuid());\n\n  const chartRef = useRef(new Chart());\n\n  const chartContainer = useRef();\n\n  useEffect(() => {\n    // 得到chart container, 并设置给chart.box\n    const box = d3.select(`#${chartId.current}`);\n    const chart = chartRef.current;\n    chart.box(box);\n\n    // 设置一下配置参数\n    chart.margins(config.margins);\n    const height = chartContainer.current.offsetHeight;\n    const width = chartContainer.current.offsetWidth;\n    chart.width(width);\n    chart.height(height);\n\n    // 拿出data\n    const data = _.get(config, 'data', []) || [];\n\n    // 得到color方法\n    const color = d3\n      .scaleOrdinal()\n      .domain(data.map(d => d.name))\n      .range(d3.quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), data.length).reverse()); // TODO: 有可能要加入d3-scale-chromatic模块\n\n    // 得到弧线生成器\n    const arc = d3\n      .arc()\n      .innerRadius(Math.min(chart.getBodyWidth(), chart.getBodyHeight()) / 4 - 1)\n      .outerRadius(Math.min(chart.getBodyWidth(), chart.getBodyHeight()) / 2 - 1);\n\n    // 得到饼形上的label所在的弧线生成器\n    const arcLabelRadius = (Math.min(chart.getBodyWidth(), chart.getBodyHeight()) / 2) * 0.8;\n    const arcLabel = d3\n      .arc()\n      .innerRadius(arcLabelRadius)\n      .outerRadius(arcLabelRadius);\n\n    // 得到饼形数据集生成器\n    const pie = d3\n      .pie()\n      .sort(null)\n      .value(d => d.value);\n\n    // 渲染图形\n    chart.renderPie = function() {\n      // 得到饼形图数据集\n      const arcs = pie(data);\n\n      chart\n        .body()\n        .select('.pie-chart-pie')\n        .remove();\n      chart\n        .body()\n        .select('.pie-chart-pie-label')\n        .remove();\n\n      // 把饼形图加到svg的body中\n      chart\n        .body()\n        .append('g')\n        .attr('transform', `translate(${chart.getBodyWidth() / 2}, ${chart.getBodyHeight() / 2})`)\n        .attr('class', 'pie-chart-pie')\n        .attr('stroke', 'white')\n        .selectAll('path')\n        .data(arcs)\n        .join('path')\n        .attr('fill', d => color(d.data.name))\n        .attr('d', arc)\n        .append('title')\n        .text(d => `${d.data.name}: ${d.data.value.toLocaleString()}`);\n\n      chart\n        .body()\n        .append('g')\n        .attr('transform', `translate(${chart.getBodyWidth() / 2}, ${chart.getBodyHeight() / 2})`)\n        .attr('class', 'pie-chart-pie-label')\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', 12)\n        .attr('text-anchor', 'middle')\n        .selectAll('text')\n        .data(arcs)\n        .join('text')\n        .attr('transform', d => `translate(${arcLabel.centroid(d)})`)\n        .call(text => text.append('tspan'))\n        .attr('y', '-0.4em')\n        .attr('font-weight', 'bold')\n        .text(d => d.data.name)\n        .call(text =>\n          text\n            .filter(d => d.endAngle - d.startAngle > 0.25)\n            .append('tspan')\n            .attr('x', 0)\n            .attr('y', '0.7em')\n            .attr('fill-opacity', 0.7)\n            .text(d => d.data.value.toLocaleString()),\n        );\n    };\n\n    chart.render = function() {\n      // chart.svg().attr('viewBox', [-chart.width() / 2, -chart.height() / 2, chart.width(), chart.height()]);\n      chart.renderPie();\n    };\n\n    chart.renderChart();\n  }, [config]);\n\n  return <div ref={chartContainer} id={chartId.current} className={c(css.piechart, className, 'pie-chart-box')}></div>;\n}\n\nPieChart.propTypes = {\n  config: PropTypes.object.isRequired,\n  className: PropTypes.string,\n};\n\nexport default PieChart;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nimport PieChart from 'components/PieChart/PieChart';\nimport css from './PieChartPage.module.scss';\n\nfunction PieChartPage() {\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    const readCSV = async () => {\n      try {\n        const readData = await d3.csv(process.env.PUBLIC_URL + '/population-by-age.csv');\n        setData(readData);\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log('e: ', e);\n      }\n    };\n    readCSV();\n  }, []);\n\n  const config = useMemo(\n    () => ({\n      data,\n      title: '饼形图',\n      margins: { top: 80, left: 80, bottom: 50, right: 80 },\n      textColor: 'black',\n      gridColor: 'gray',\n      animateDuration: 1000,\n    }),\n    [data],\n  );\n\n  return (\n    <div className={css.pieChartPage}>\n      <PieChart config={config} />\n    </div>\n  );\n}\n\nexport default PieChartPage;\n","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport c from 'classnames';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport * as geo from 'd3-geo';\nimport * as d3Color from 'd3-scale-chromatic';\n\nimport { uuid } from 'utils/utils';\nimport Chart from 'Chart/Chart';\nimport css from './Map.module.scss';\n\nfunction Map({ config, className = '' }) {\n  const chartId = useRef(uuid());\n\n  const chartRef = useRef(new Chart());\n\n  const chartContainer = useRef();\n\n  useEffect(() => {\n    // 得到chart container, 并设置给chart.box\n    const box = d3.select(`#${chartId.current}`);\n    const chart = chartRef.current;\n    chart.box(box);\n\n    // 设置一下配置参数\n    chart.margins(config.margins);\n    const height = chartContainer.current.offsetHeight;\n    const width = chartContainer.current.offsetWidth;\n    chart.width(width);\n    chart.height(height);\n\n    // 拿出map data\n    const mapData = _.get(config, 'data', {}) || {};\n    const cityData = _.get(config, 'cityData', []) || [];\n\n    // 设置投影函数\n    const projection = geo\n      .geoMercator()\n      .scale(750)\n      .center([105, 38])\n      .translate([chart.getBodyWidth() / 2, chart.getBodyHeight() / 2]);\n\n    // 设置路径生成器\n    const path = geo.geoPath(projection);\n\n    // 创建颜色比例尺\n    const colors = d3.scaleOrdinal(d3Color.schemeRdYlGn[11]);\n    // const colors = getRandomColor16;\n\n    // 加载地图json并生成地图\n    chart.renderMap = function() {\n      if (!mapData.features) {\n        return;\n      }\n      chart\n        .body()\n        .selectAll('.map-path')\n        .remove();\n      chart\n        .body()\n        .selectAll('path')\n        .data(mapData.features)\n        .enter()\n        .append('path')\n        .attr('class', 'map-path')\n        .attr('d', path)\n        .attr('fill', (d, i) => colors(i))\n        .attr('stroke', 'lightGray')\n        .attr('stroke-width', 1)\n        .append('title')\n        .attr('')\n    };\n\n    // 渲染城市\n    chart.renderCity = function() {\n      chart\n        .body()\n        .selectAll('.map-city')\n        .data(cityData)\n        .enter()\n        .append('g')\n        .attr('class', 'map-city')\n        .attr('transform', d => {\n          const coor = projection([d.log, d.lat]);\n          return `translate(${coor[0]}, ${coor[1]})`;\n        })\n        .append('circle')\n        .attr('r', 4)\n        .attr('fill', 'blue')\n        .attr('class', 'map-city-point');\n    };\n\n    // 添加事件互动\n    chart.addEvent = function() {\n      const tooltip = d3.select('#china-map-tooltip');\n      chart\n        .body()\n        .selectAll('.map-city')\n        .on('mouseover', function(d) {\n          tooltip\n            .html('当前城市: ' + d.name)\n            .style('left', d3.event.pageX + 20 + 'px')\n            .style('top', d3.event.pageY + 20 + 'px')\n            .style('opacity', 1);\n\n          d3.select(this)\n            .select('circle')\n            .transition()\n            .duration(150)\n            .attr('r', 8);\n        })\n        .on('mouseout', function() {\n          tooltip.style('opacity', 0);\n          d3.select(this)\n            .select('circle')\n            .transition()\n            .duration(150)\n            .attr('r', 4);\n        });\n    };\n\n    chart.render = function() {\n      chart.renderMap();\n      chart.renderCity();\n      chart.addEvent();\n    };\n\n    chart.renderChart();\n  }, [config]);\n\n  return <div ref={chartContainer} id={chartId.current} className={c(css.map, className, 'map-chart-map')}></div>;\n}\n\nMap.propTypes = {\n  config: PropTypes.object.isRequired,\n  className: PropTypes.string,\n};\n\nexport default Map;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport Map from 'components/Map/Map';\nimport css from './ChinaMapPage.module.scss';\n\nfunction ChinaMapPage() {\n  const [mapData, setMapData] = useState({});\n  const [cityData, setCityData] = useState({});\n\n  useEffect(() => {\n    const readCSV = async () => {\n      try {\n        const mapJson = await d3.json(process.env.PUBLIC_URL + '/china.json');\n        setMapData(mapJson);\n        const cityJson = await d3.json(process.env.PUBLIC_URL + '/city.json');\n        setCityData(cityJson);\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log('e: ', e);\n      }\n    };\n    readCSV();\n  }, []);\n\n  const config = useMemo(\n    () => ({\n      data: mapData,\n      cityData: _.get(cityData, 'cities', []),\n      title: '中国地图',\n      margins: { top: 80, left: 80, bottom: 50, right: 80 },\n      textColor: 'black',\n      gridColor: 'gray',\n      animateDuration: 1000,\n    }),\n    [mapData, cityData],\n  );\n\n  return (\n    <div className={css.chinaMapPage}>\n      <Map config={config} />\n      <div id=\"china-map-tooltip\"></div>\n    </div>\n  );\n}\n\nexport default ChinaMapPage;\n","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport c from 'classnames';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport { uuid } from 'utils/utils';\nimport Chart from 'Chart/Chart';\nimport css from './SVGTree.module.scss';\n\nfunction SVGTree({ config, className = '' }) {\n  const chartId = useRef(uuid());\n\n  const chartRef = useRef(new Chart());\n\n  const chartContainer = useRef();\n\n  useEffect(() => {\n    // 得到chart container, 并设置给chart.box\n    const box = d3.select(`#${chartId.current}`);\n    const chart = chartRef.current;\n    chart.box(box);\n\n    // 设置一下配置参数\n    chart.margins(config.margins);\n    const height = chartContainer.current.offsetHeight;\n    const width = chartContainer.current.offsetWidth;\n    chart.width(width);\n    chart.height(height);\n\n    // 拿出map data\n    const data = _.get(config, 'data', {});\n\n    // 树生成器\n    const dy = width / 6;\n    const dx = 10;\n    const tree = d3.tree().nodeSize([dx, dy]);\n\n    // 创建一个水平的 link 生成器\n    const diagonal = d3\n      .linkHorizontal()\n      .x(d => d.y)\n      .y(d => d.x);\n\n    // 从给定的层次结构数据构造一个根节点并为各个节点指定深度等属性\n    const root = d3.hierarchy(data);\n    root.x0 = dy / 2;\n    root.y0 = 0;\n    root.descendants().forEach((d, i) => {\n      d.id = i;\n      d._children = d.children;\n      if (d.depth && d.data.name.length !== 7) {\n        d.children = null;\n      }\n    });\n\n    // 首先把svg设置属性\n    chart.renderSVG = function() {\n      chart.defineBodyClip = () => {};\n      if (!chart.svg()) {\n        chart.svg(\n          chart\n            .box()\n            .append('svg')\n            .attr('class', 'svg-container')\n            .attr('viewBox', [0, 0, width, dx])\n            .style('font', '10px sans-serif')\n            .style('user-select', 'none')\n            .attr('width', this._width)\n            .attr('height', this._height),\n        );\n      }\n    };\n    // 渲染树图\n    chart.renderSVGTree = function() {\n      const gLink = chart\n        .body()\n        .append('g')\n        .attr('fill', 'none')\n        .attr('stroke', '#555')\n        .attr('stroke-opacity', 0.4)\n        .attr('stroke-width', 1.5);\n\n      const gNode = chart\n        .body()\n        .append('g')\n        .attr('cursor', 'pointer')\n        .attr('pointer-events', 'all');\n\n      function update(source) {\n        const duration = d3.event && d3.event.altKey ? 2500 : 250;\n        const nodes = root.descendants().reverse();\n        // eslint-disable-next-line\n        console.log('nodes: ', nodes)\n        const links = root.links();\n\n        // 计算新tree布局\n        tree(root);\n\n        // 找到最高点和最低点\n        let left = root;\n        let right = root;\n        root.eachBefore(node => {\n          if (node.x < left.x) {\n            left = node;\n          }\n          if (node.x > right.x) {\n            right = node;\n          }\n        });\n\n        const height = right.x - left.x + config.margins.top + config.margins.bottom;\n\n        const transition = chart\n          .svg()\n          .transition()\n          .duration(duration)\n          .attr('viewBox', [0, left.x - config.margins.top, width, height])\n          .attr('preserveAspectRatio', 'xMinYMin meet')\n          .tween('resize', window.ResizeObserver ? null : () => () => chart.svg().dispatch('toggle'));\n\n        const node = gNode.selectAll('g').data(nodes, d => d.id);\n\n        const nodeEnter = node\n          .enter()\n          .append('g')\n          .attr('transform', d => `translate(${source.y0}, ${source.x0})`)\n          .attr('fill-opacity', 0)\n          .attr('stroke-opacity', 0)\n          .on('click', d => {\n            d.children = d.children ? null : d._children;\n            update(d);\n          });\n\n        nodeEnter\n          .append('circle')\n          .attr('r', 2.5)\n          .attr('fill', d => (d._children ? '#555' : '#999'))\n          .attr('stroke-width', 10);\n\n        // 把所有节点挪到他们的新位置\n        const updateNode = node.merge(nodeEnter);\n\n        updateNode\n          .transition(transition)\n          .attr('transform', d => `translate(${d.y}, ${d.x})`)\n          .attr('fill-opacity', 1)\n          .attr('stroke-opacity', 1);\n\n        chart\n          .svg()\n          .selectAll('text')\n          .remove();\n\n        updateNode\n          .append('text')\n          .attr('dy', '0.31em')\n          .attr('x', d => (d.children ? -6 : 6))\n          .attr('text-anchor', d => (d.children ? 'end' : 'start'))\n          .text(d => d.data.name)\n          .clone(true)\n          .lower()\n          .attr('stroke-linejoin', 'round')\n          .attr('stroke-width', 3)\n          .attr('stroke', 'white');\n\n        // 应该删除的节点 挪到他们的父节点再删除\n        node\n          .exit()\n          .transition(transition)\n          .remove()\n          .attr('transform', d => `translate(${source.y}, ${source.x})`)\n          .attr('fill-opacity', 0)\n          .attr('stroke-opacity', 0);\n\n        // 更新链接线\n        const link = gLink.selectAll('path').data(links, d => d.target.id);\n\n        const linkEnter = link\n          .enter()\n          .append('path')\n          .attr('d', d => {\n            const o = { x: source.x0, y: source.y0 };\n            return diagonal({ source: o, target: o });\n          });\n\n        link\n          .merge(linkEnter)\n          .transition(transition)\n          .attr('d', diagonal);\n\n        link\n          .exit()\n          .transition(transition)\n          .attr('d', d => {\n            const o = { x: source.x, y: source.y };\n            return diagonal({ source: o, target: o });\n          });\n\n        // 隐藏掉旧节点位置\n        root.eachBefore(d => {\n          d.x0 = d.x;\n          d.y0 = d.y;\n        });\n      }\n\n      update(root);\n    };\n\n    chart.render = function() {\n      chart.renderSVGTree();\n    };\n\n    chart.renderChart();\n  }, [config]);\n\n  return <div ref={chartContainer} id={chartId.current} className={c(css.svgTree, className, 'svg-tree')}></div>;\n}\n\nSVGTree.propTypes = {\n  config: PropTypes.object.isRequired,\n  className: PropTypes.string,\n};\n\nexport default SVGTree;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nimport SVGTree from 'components/SVGTree/SVGTree';\nimport css from './SVGTreePage.module.scss';\n\nfunction SVGTreePage() {\n  const [data, setData] = useState({});\n\n  useEffect(() => {\n    const readJson = async () => {\n      try {\n        const treeJson = await d3.json(process.env.PUBLIC_URL + '/flare-2.json');\n        setData(treeJson);\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log('e: ', e);\n      }\n    };\n    readJson();\n  }, []);\n\n  const config = useMemo(\n    () => ({\n      data: data,\n      title: '树状图',\n      margins: { top: 80, left: 80, bottom: 50, right: 80 },\n      textColor: 'black',\n      gridColor: 'gray',\n      animateDuration: 1000,\n    }),\n    [data],\n  );\n\n  return (\n    <div className={css.svgTreePage}>\n      <SVGTree config={config} />\n    </div>\n  );\n}\n\nexport default SVGTreePage;\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from 'react-router-dom';\n\nimport { Layout, Menu } from 'antd';\n\nimport Home from 'view/Home/Home';\nimport BarChartPage from 'view/BarChartPage/BarChartPage';\nimport LineChartPage from 'view/LineChartPage/LineChartPage';\nimport PieChartPage from 'view/PieChartPage/PieChartPage';\nimport ChinaMapPage from 'view/ChinaMapPage/ChinaMapPage';\nimport SVGTreePage from 'view/SVGTreePage/SVGTreePage';\nimport css from './App.module.scss';\n\nconst { Header, Footer, Sider, Content } = Layout;\n\nexport default function App() {\n  return (\n    <Router basename=\"/D3-Learning\">\n      <div className={css.app}>\n        <Layout className={css.container}>\n          <Header>\n            <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['1']} style={{ lineHeight: '64px' }}>\n              <Menu.Item key=\"1\">D3</Menu.Item>\n            </Menu>\n          </Header>\n          <Layout className={css.body}>\n            <Sider>\n              <Menu className={css.sideBarMenu} theme=\"light\" mode=\"inline\" defaultSelectedKeys={['home']}>\n                <Menu.Item key=\"home\">\n                  <Link className=\"nav-text\" to=\"/home\">\n                    home\n                  </Link>\n                </Menu.Item>\n                <Menu.Item key=\"bar\">\n                  <Link className=\"nav-text\" to=\"/bar\">\n                    bar chart\n                  </Link>\n                </Menu.Item>\n                <Menu.Item key=\"line\">\n                  <Link className=\"nav-text\" to=\"/line\">\n                    line chart\n                  </Link>\n                </Menu.Item>\n                <Menu.Item key=\"pie\">\n                  <Link className=\"nav-text\" to=\"/pie\">\n                    pie chart\n                  </Link>\n                </Menu.Item>\n                <Menu.Item key=\"map\">\n                  <Link className=\"nav-text\" to=\"/map\">\n                    map chart\n                  </Link>\n                </Menu.Item>\n                <Menu.Item key=\"svgTree\">\n                  <Link className=\"nav-text\" to=\"/svg-tree\">\n                    svg tree\n                  </Link>\n                </Menu.Item>\n              </Menu>\n            </Sider>\n            <Content>\n              <Switch>\n                <Route path=\"/home\">\n                  <Home />\n                </Route>\n                <Route path=\"/bar\">\n                  <BarChartPage />\n                </Route>\n                <Route path=\"/line\">\n                  <LineChartPage />\n                </Route>\n                <Route path=\"/pie\">\n                  <PieChartPage />\n                </Route>\n                <Route path=\"/map\">\n                  <ChinaMapPage />\n                </Route>\n                <Route path=\"/svg-tree\">\n                  <SVGTreePage />\n                </Route>\n                <Route exact path=\"/\">\n                  <Redirect to=\"/home\" />\n                </Route>\n              </Switch>\n            </Content>\n          </Layout>\n          <Footer className={css.footer}>Footer</Footer>\n        </Layout>\n      </div>\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2ziFi\",\"container\":\"App_container__eSJ6i\",\"body\":\"App_body__2a4FT\",\"sideBarMenu\":\"App_sideBarMenu__PtotW\",\"footer\":\"App_footer__3csul\"};"],"sourceRoot":""}